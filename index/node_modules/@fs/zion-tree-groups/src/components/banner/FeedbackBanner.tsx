import React, { type ComponentProps } from 'react'
import { Link } from '@fs/zion-router'
import { useTranslation } from 'react-i18next'
import { useGroupsContext } from '../../providers/GroupsProvider/InnerGroupsProvider'
import BaseBanner from './BaseBanner'

export default function FeedbackBanner(
  props: Pick<ComponentProps<typeof BaseBanner>, 'marginBottom' | 'marginTop'>
): JSX.Element {
  const [t] = useTranslation()
  const { isResearcherGroup } = useGroupsContext()
  const feedbackText = t('groups.give-feedback.link')
  const description = isResearcherGroup
    ? t('groups.early-access-researcher.description')
    : t('groups.early-access.description')
  const communityLink = isResearcherGroup
    ? 'https://community.familysearch.org/en/group/338-researcher-trees-feedback-early-access'
    : 'https://community.familysearch.org/en/group/321-family-group-trees-test-group-pilot-2'
  const dismissedKey = isResearcherGroup ? 'bannerDismissedResearcher' : 'bannerDismissed'

  return (
    <BaseBanner {...props} dismissedKey={dismissedKey}>
      {description}{' '}
      <Link to={communityLink} target="_blank" external wayfinding>
        {feedbackText}
      </Link>
    </BaseBanner>
  )
}
