import React from 'react'
import { NoticeLoading } from '@fs/zion-icon'
import { css } from '@linaria/core'
import AddFindFlowDisplayError from './DisplayErrorView'
import { FIND_FLOW } from '../services/AddFindFlowService'
import { useAddFindFlowContext } from '../hooks/AddFindFlowContext'
import useCustomEscHandler from '../hooks/useCustomEsc'

const loadingCss = css`
  display: flex;
  justify-content: center;
`
export default function Loading({ updateInfoSheetFooter }) {
  const { errors } = useAddFindFlowContext()
  useCustomEscHandler()

  if (errors?.[FIND_FLOW]) {
    return (
      <AddFindFlowDisplayError
        updateInfoSheetFooter={updateInfoSheetFooter}
        titleKey={errors[`${FIND_FLOW}-title`]?.messageKey}
        messageKey={errors[FIND_FLOW]?.messageKey}
        link={errors[FIND_FLOW]?.link}
      />
    )
  }

  return (
    <div className={loadingCss} data-testid="add-find-flow-loading">
      <NoticeLoading size="lg" />
    </div>
  )
}
