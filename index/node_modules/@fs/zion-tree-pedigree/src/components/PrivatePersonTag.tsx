import { type BasePerson } from '@fs/zion-tree-types'
import { Tag } from '@fs/zion-ui'
import React, { useMemo } from 'react'
import { NoticeProtected } from '@fs/zion-icon'
import { useTranslation } from 'react-i18next'

type Props = {
  person: Omit<BasePerson, 'id'> & { id: 'loading' | BasePerson['id'] }
}

export default function PrivatePersonTag({ person }: Props): JSX.Element | null {
  const [t] = useTranslation()
  const text = useMemo(() => {
    return person.living ? person.lifespan : t('tw.pedigree.confidential.label')
  }, [person.lifespan, person.living, t])

  if (person.id === 'loading' || person.visibleToAllWhenUsingFamilySearchApps || !text) return null

  return <Tag text={text} color={person.living ? 'blue' : 'yellow'} Icon={NoticeProtected} />
}
