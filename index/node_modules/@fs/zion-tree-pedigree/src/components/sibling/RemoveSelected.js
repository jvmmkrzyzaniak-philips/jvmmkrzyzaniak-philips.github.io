import React from 'react'
import { DialogOverlay, DialogOverlayActions, DialogOverlayFooter, Button, Paragraph } from '@fs/zion-ui'
import { useTranslation } from 'react-i18next'
import { Person } from '@fs/zion-person'
import { selectTest } from '../../hooks/sibling/helpers'

const RemoveSelected = ({ overlay, selectKeys, altsToRemove, selectProps, removeHandler, selectedPids }) => {
  const selectKey = selectKeys?.[0] // First in list is one being clicked on
  const { t } = useTranslation()
  return (
    <DialogOverlay {...overlay} title={t('tw.pedigree.remove-from-list.heading')}>
      <Paragraph size="sm">
        {t('tw.pedigree.remove-from-list.description', { name: selectedPids?.[selectKey]?.name })}
      </Paragraph>
      {selectKeys
        ?.slice(1) // Don't need to to show the user the first person in the list, they clicked on that one.
        ?.filter((key) => {
          const person = selectedPids?.[key]
          return selectTest({ selectProps, person })
        })
        .map((key) => {
          return <Person key={key} componentSize="sm" personObj={selectedPids?.[key]} />
        })}
      {altsToRemove?.map((person) => {
        const key = `remove-${person?.id}-${person?.treeLinkedSelectKey}`
        return <Person key={key} componentSize="sm" personObj={person} />
      })}
      <DialogOverlayFooter>
        <DialogOverlayActions>
          <Button onClick={overlay.handleClick}>{t('common-ui:cancel.action')}</Button>
          <Button onClick={removeHandler} emphasis="high">
            {t('tw.pedigree.remove.action')}
          </Button>
        </DialogOverlayActions>
      </DialogOverlayFooter>
    </DialogOverlay>
  )
}

export default RemoveSelected
