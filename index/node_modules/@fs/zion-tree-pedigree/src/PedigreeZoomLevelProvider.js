import React, { createContext, useContext, useState, useMemo } from 'react'

const ZoomLevelContext = createContext()
const ZOOM_STAGE_1 = 0.45
const ZOOM_STAGE_2 = 0.325

export const useZoomLevelContext = () => {
  return useContext(ZoomLevelContext)
}

export const PedigreeZoomLevelProvider = ({ children }) => {
  const [zoomLevel, setZoomLevel] = useState()
  let zoomStage = 0
  if (zoomLevel <= ZOOM_STAGE_2) {
    zoomStage = 2
  } else if (zoomLevel <= ZOOM_STAGE_1) {
    zoomStage = 1
  }
  const value = useMemo(
    () => ({
      setZoomLevel,
      zoomStage,
    }),
    [zoomStage]
  )

  return <ZoomLevelContext.Provider value={value}>{children}</ZoomLevelContext.Provider>
}
